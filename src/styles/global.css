@import "tailwindcss";

/* Import style utilities */
@import "./utils/animations.css";
@import "./utils/transitions.css";

/* Import component styles */
@import "./components/button.css";
@import "./components/card.css";

/* Configure Tailwind to use data-theme instead of media queries */
@variant dark ([data-theme="dark"] &);

@theme {
  /* Brand Colors - Raw Tokens */
  --color-monk-yellow: #ffde0a;
  --color-code-black: #121212;
  --color-silent-white: #f5f5f5;
  --color-rhythm-grey: #4a5568; /* Improved contrast: was #888888, now darker for better readability */

  /* Enhanced Light Mode Colors */
  --color-monk-yellow-light: #fff4b3; /* Subtle yellow background for light mode */
  --color-monk-yellow-dark: #e6c800; /* Darker yellow for better contrast */
  --color-monk-yellow-contrast: #b8a200; /* High contrast yellow for light backgrounds (WCAG AA: 4.5:1) */

  /* Premium Light Mode Neutrals */
  --color-light-neutral-50: #fafafa;
  --color-light-neutral-100: #f4f4f5;
  --color-light-neutral-200: #e4e4e7;
  --color-light-neutral-300: #d4d4d8;
  --color-light-neutral-400: #a1a1aa;

  /* Brand Typography */
  --font-family-heading: Montserrat, ui-sans-serif, system-ui, sans-serif;
  --font-family-body: Inter, ui-sans-serif, system-ui, sans-serif;
  --font-family-mono: "JetBrains Mono", ui-monospace, monospace;

  /* SEMANTIC THEME TOKENS */
  /* These will generate text-primary, bg-primary, border-primary, etc. */
  --color-primary: var(--color-monk-yellow); /* Use pure brand yellow */
  --color-primary-bg: var(--color-monk-yellow); /* Pure yellow for backgrounds */
  --color-primary-foreground: var(--color-code-black);
  --color-accent: var(--color-monk-yellow); /* Use pure brand yellow */
  --color-accent-bg: var(--color-monk-yellow); /* Pure yellow for backgrounds */
  --color-accent-foreground: var(--color-code-black);

  /* Button and interaction colors */
  --color-button-primary: var(--color-monk-yellow); /* Pure brand yellow */
  --color-button-primary-text: var(--color-code-black); /* Black text on yellow buttons */

  /* Base background/foreground colors */
  --color-background: var(--color-silent-white);
  --color-foreground: var(--color-code-black);

  /* Enhanced semantic colors for better accessibility */
  --color-secondary: var(--color-rhythm-grey); /* Now uses the improved contrast grey */
  --color-muted: #71717a; /* Better contrast for borders and subtle elements */
  --color-muted-foreground: #52525b; /* Strong contrast for secondary text */

  /* Light mode enhancements */
  --color-emphasis-bg: #f5e6d3; /* Warm sand - complements monk yellow */
  --color-card-border: #e5e7eb; /* Better than neutral-200 */
  --color-card-shadow: rgba(0, 0, 0, 0.06); /* Subtle shadow for depth */
  --color-card-bg: var(--color-background); /* Card background same as page in light mode */
}

/* Dark mode overrides */
[data-theme="dark"] {
  --color-primary: var(--color-monk-yellow); /* Bright yellow works well in dark mode */
  --color-primary-bg: var(--color-monk-yellow); /* Bright yellow for backgrounds */
  --color-primary-foreground: var(--color-code-black);
  --color-accent: var(--color-monk-yellow); /* Bright yellow works well in dark mode */
  --color-accent-bg: var(--color-monk-yellow); /* Bright yellow for backgrounds */
  --color-accent-foreground: var(--color-code-black);

  /* Button colors remain the same in dark mode */
  --color-button-primary: var(--color-monk-yellow);
  --color-button-primary-text: var(--color-code-black);

  --color-background: var(--color-code-black);
  --color-foreground: var(--color-silent-white);

  /* Dark mode semantic colors */
  --color-secondary: #9ca3af; /* Lighter grey for dark mode */
  --color-muted: #6b7280; /* Same as light mode - no transparency to avoid overlay issues */
  --color-muted-foreground: #a1a1aa; /* Improved contrast for dark mode secondary text */

  /* Dark mode enhancements */
  --color-emphasis-bg: rgba(255, 222, 10, 0.1); /* Subtle yellow glow for dark mode */
  --color-card-border: #374151; /* Solid border for dark mode */
  --color-card-shadow: rgba(0, 0, 0, 0.3); /* Stronger shadow for dark mode */
  --color-card-bg: #1a1a1a; /* Elevated card background for dark mode */

  /* Filter count dark mode colors */
  --filter-count-bg: rgba(255, 255, 255, 0.2);
  --filter-count-color: var(--color-foreground);
  --filter-count-active-bg: rgba(0, 0, 0, 0.3);
  --filter-count-active-color: var(--color-primary);
}

/* Base Styles */
@layer base {
  /* Root element setup with overflow control */
  html {
    scroll-behavior: smooth;
    /* Allow vertical scroll without restricting horizontal overflow */
    overflow-y: auto;
  }

  /* Typography setup with overflow protection */
  body {
    font-family: var(--font-family-body);
    /* Apply semantic background/foreground colors */
    @apply bg-background text-foreground antialiased;
    /* Ensure body doesn't create horizontal overflow */
    overflow-x: hidden;
    /* Prevent text from breaking layout */
    word-wrap: break-word;
    overflow-wrap: break-word;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-family: var(--font-family-heading);
    @apply font-bold;
  }

  code,
  pre {
    font-family: var(--font-family-mono);
  }

  /* Form element defaults */
  input[type="text"],
  input[type="email"],
  input[type="password"],
  input[type="search"],
  input[type="tel"],
  input[type="url"],
  textarea,
  select {
    @apply px-3 py-2;
  }

  /* Better select chevron styling */
  select {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%23374151' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 0.75rem center;
    background-repeat: no-repeat;
    background-size: 1.25em 1.25em;
    padding-right: 2.5rem;
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
  }

  /* Dark mode select chevron */
  [data-theme="dark"] select {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%23d1d5db' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
  }

  /* Use Tailwind's selection: variant instead */

  /* Let Tailwind handle focus styles with focus-visible: utilities */

  /* Image overflow prevention */
  img,
  video,
  svg {
    max-width: 100%;
    height: auto;
  }

  /* Prevent long strings from breaking layout */
  pre,
  code,
  kbd,
  samp {
    overflow-wrap: break-word;
    word-wrap: break-word;
  }

  /* Table overflow handling */
  table {
    table-layout: fixed;
    width: 100%;
  }

  /* Reduced motion preferences */
  @media (prefers-reduced-motion: reduce) {
    html {
      scroll-behavior: auto;
    }
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
}

/* Animation & Theme Utilities */
@layer utilities {
  /* Smooth theme transitions */
  .transition-theme {
    @apply transition-[color,background-color,border-color] duration-150 ease-in-out;
  }

  /* Custom focus utilities - Beautiful, subtle focus indicators */
  .focus-ring {
    @apply focus:outline-none;
    transition: box-shadow 0.15s ease;
  }

  .focus-ring:focus {
    box-shadow: 0 0 0 3px rgba(255, 222, 10, 0.25);
  }

  /* Enhanced focus for buttons and interactive elements */
  .focus-ring-primary {
    @apply focus:outline-none;
    transition: box-shadow 0.15s ease;
  }

  .focus-ring-primary:focus {
    box-shadow:
      0 0 0 3px rgba(255, 222, 10, 0.3),
      0 0 12px rgba(255, 222, 10, 0.2);
  }

  /* Subtle focus for inputs and form elements */
  .focus-ring-subtle {
    @apply focus:outline-none;
    transition:
      box-shadow 0.15s ease,
      border-color 0.15s ease;
  }

  .focus-ring-subtle:focus {
    box-shadow: 0 0 0 2px rgba(255, 222, 10, 0.2);
    border-color: var(--color-primary);
  }

  /* Dark mode adjustments for focus rings */
  [data-theme="dark"] .focus-ring:focus {
    box-shadow: 0 0 0 3px rgba(255, 222, 10, 0.15);
  }

  [data-theme="dark"] .focus-ring-primary:focus {
    box-shadow:
      0 0 0 3px rgba(255, 222, 10, 0.2),
      0 0 16px rgba(255, 222, 10, 0.15);
  }

  [data-theme="dark"] .focus-ring-subtle:focus {
    box-shadow: 0 0 0 2px rgba(255, 222, 10, 0.15);
  }

  /* Modern layout utilities */
  .flex-center {
    @apply flex items-center justify-center;
  }

  .flex-between {
    @apply flex items-center justify-between;
  }

  .grid-auto-fit {
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  }

  .grid-auto-fill {
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  }

  /* Responsive grid utilities */
  .grid-responsive {
    @apply grid gap-6;
    grid-template-columns: repeat(auto-fit, minmax(min(100%, 300px), 1fr));
  }

  .grid-responsive-sm {
    @apply grid gap-4;
    grid-template-columns: repeat(auto-fit, minmax(min(100%, 250px), 1fr));
  }

  .grid-responsive-lg {
    @apply grid gap-8;
    grid-template-columns: repeat(auto-fit, minmax(min(100%, 350px), 1fr));
  }

  /* Safe area utilities for mobile */
  .safe-area-top {
    padding-top: env(safe-area-inset-top);
  }

  .safe-area-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  /* Aspect ratio utilities */
  .aspect-golden {
    aspect-ratio: 1.618;
  }

  .aspect-card {
    aspect-ratio: 4 / 3;
  }

  .aspect-hero {
    aspect-ratio: 16 / 9;
  }

  /* Scroll margin utilities for smooth scrolling with fixed headers */
  .scroll-mt-header {
    scroll-margin-top: 4rem;
  }

  /* Responsive text utilities */
  .text-responsive {
    font-size: clamp(1rem, 2.5vw, 1.25rem);
  }

  .text-responsive-lg {
    font-size: clamp(1.25rem, 4vw, 2rem);
  }

  .text-responsive-xl {
    font-size: clamp(1.5rem, 5vw, 3rem);
  }

  /* Modern stacking utilities */
  .stack > * + * {
    margin-top: 1rem;
  }

  .stack-sm > * + * {
    margin-top: 0.5rem;
  }

  .stack-lg > * + * {
    margin-top: 1.5rem;
  }

  /* Fluid spacing utilities */
  .space-fluid-sm {
    gap: clamp(0.5rem, 2vw, 1rem);
  }

  .space-fluid {
    gap: clamp(1rem, 3vw, 1.5rem);
  }

  .space-fluid-lg {
    gap: clamp(1.5rem, 4vw, 2rem);
  }
}

/* Layout Utilities - Modern responsive containers and spacing */
@layer components {
  /* 
   * Container utilities for consistent max-widths and padding
   * Based on 2025 best practices:
   * - content-container: 1280px max-width (max-w-7xl) for general content
   * - text-container: ~65ch for optimal reading (~896px on prose)
   * - wide-container: 1536px max-width (max-w-screen-2xl) for full-width sections
   * - narrow-container: 672px max-width (max-w-2xl) for forms and compact content
   */
  .content-container {
    @apply max-w-7xl mx-auto px-4 sm:px-6 lg:px-8;
  }

  /* Text container for optimal reading width (~65ch) */
  .text-container {
    @apply max-w-prose mx-auto;
  }

  /* Wide container for full-width sections */
  .wide-container {
    @apply max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8;
  }

  /* Narrow container for forms and compact content */
  .narrow-container {
    @apply max-w-2xl mx-auto px-4 sm:px-6;
  }

  /* Section spacing utilities */
  .section-spacing {
    @apply py-16 md:py-24 lg:py-32;
  }

  .section-spacing-sm {
    @apply py-12 md:py-16 lg:py-20;
  }

  .section-spacing-lg {
    @apply py-20 md:py-32 lg:py-40;
  }

  /* Container Query Support */
  .project-card {
    container-type: inline-size;
  }

  /* Responsive without media queries */
  @container (min-width: 20rem) {
    .project-card-content {
      @apply grid-cols-2;
    }
  }
}

/* Fade-in Animation Styles */
@layer utilities {
  /* Initial state for fade-in elements */
  .fade-in {
    opacity: 0;
    transform: translateY(20px);
    transition:
      opacity 0.6s ease-out,
      transform 0.6s ease-out;
  }

  /* Visible state after intersection observer triggers */
  .fade-in.visible {
    opacity: 1;
    transform: translateY(0);
  }

  /* Reduced motion: instant visibility */
  @media (prefers-reduced-motion: reduce) {
    .fade-in {
      opacity: 1;
      transform: none;
      transition: none;
    }
  }
}

/* Global Gradient Layer System */
@layer components {
  /* Page-level gradient container */
  .page-gradient-layer {
    position: fixed;
    inset: 0;
    z-index: 1;
    pointer-events: none;
    overflow: visible;
    /* Ensure gradients don't interfere with scrolling */
    will-change: transform;
  }

  /* Individual gradient orbs */
  .gradient-orb {
    position: absolute;
    border-radius: 50%;
    filter: blur(80px);
    opacity: 0.4;
    transition: all 20s ease-in-out infinite;
    mix-blend-mode: screen;
  }

  /* Light mode gradient colors and positions */
  .gradient-orb-1 {
    width: 600px;
    height: 600px;
    background: radial-gradient(circle at center, var(--color-monk-yellow) 0%, transparent 70%);
    top: -200px;
    right: -200px;
    animation: gentle-drift-1 30s ease-in-out infinite;
  }

  .gradient-orb-2 {
    width: 500px;
    height: 500px;
    background: radial-gradient(
      circle at center,
      var(--color-monk-yellow-light) 0%,
      transparent 60%
    );
    bottom: 10vh;
    left: -150px;
    animation: gentle-drift-2 25s ease-in-out infinite;
  }

  .gradient-orb-3 {
    width: 400px;
    height: 400px;
    background: radial-gradient(
      circle at center,
      var(--color-light-neutral-200) 0%,
      transparent 50%
    );
    top: 50vh;
    left: 60vw;
    animation: gentle-drift-3 35s ease-in-out infinite;
  }

  .gradient-orb-4 {
    width: 300px;
    height: 300px;
    background: radial-gradient(
      circle at center,
      var(--color-monk-yellow-light) 0%,
      transparent 60%
    );
    top: 30vh;
    right: 20vw;
    animation: gentle-drift-4 28s ease-in-out infinite;
  }

  /* Dark mode adjustments */
  [data-theme="dark"] .gradient-orb {
    mix-blend-mode: lighten;
    opacity: 0.08;
    filter: blur(100px);
  }

  [data-theme="dark"] .gradient-orb-1 {
    background: radial-gradient(circle at center, var(--color-monk-yellow) 0%, transparent 50%);
    opacity: 0.1;
  }

  [data-theme="dark"] .gradient-orb-2 {
    background: radial-gradient(circle at center, var(--color-monk-yellow) 0%, transparent 40%);
    opacity: 0.06;
  }

  [data-theme="dark"] .gradient-orb-3 {
    background: radial-gradient(circle at center, var(--color-monk-yellow) 0%, transparent 30%);
    opacity: 0.05;
  }

  [data-theme="dark"] .gradient-orb-4 {
    background: radial-gradient(circle at center, var(--color-monk-yellow) 0%, transparent 40%);
    opacity: 0.08;
  }

  /* Hero section gradients at page level */
  .hero-gradient {
    position: absolute;
    border-radius: 50%;
    filter: blur(3xl);
    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  .hero-gradient-left {
    width: 24rem; /* w-96 = 384px */
    height: 24rem;
    background: rgba(255, 222, 10, 0.08); /* bg-primary/8 */
    top: 5rem; /* top-20 = 80px */
    left: -10rem; /* -left-40 = -160px */
    filter: blur(120px);
    opacity: 0.6;
  }

  .hero-gradient-right {
    width: 30rem; /* Slightly larger for better visibility */
    height: 30rem;
    background: rgba(255, 222, 10, 0.15); /* Increased opacity for visibility */
    top: 10%; /* Position in top area of viewport */
    right: -15rem; /* Adjust for better placement */
    filter: blur(150px);
    opacity: 0.6;
    animation-delay: 3s;
  }

  /* Dark mode adjustments for hero gradients */
  [data-theme="dark"] .hero-gradient-left {
    background: rgba(255, 222, 10, 0.06);
    opacity: 0.4;
  }

  [data-theme="dark"] .hero-gradient-right {
    background: rgba(255, 222, 10, 0.08); /* Increased for better visibility */
    opacity: 0.5;
  }

  /* Gradient animations */
  @keyframes gentle-drift-1 {
    0%,
    100% {
      transform: translate(0, 0) scale(1);
    }
    25% {
      transform: translate(-50px, 100px) scale(1.1);
    }
    50% {
      transform: translate(30px, 50px) scale(0.95);
    }
    75% {
      transform: translate(-20px, -30px) scale(1.05);
    }
  }

  @keyframes gentle-drift-2 {
    0%,
    100% {
      transform: translate(0, 0) scale(1);
    }
    33% {
      transform: translate(80px, -60px) scale(1.15);
    }
    66% {
      transform: translate(40px, -100px) scale(0.9);
    }
  }

  @keyframes gentle-drift-3 {
    0%,
    100% {
      transform: translate(0, 0) scale(1);
    }
    20% {
      transform: translate(-60px, -40px) scale(1.1);
    }
    40% {
      transform: translate(-30px, 60px) scale(0.95);
    }
    60% {
      transform: translate(40px, 30px) scale(1.05);
    }
    80% {
      transform: translate(20px, -50px) scale(0.98);
    }
  }

  @keyframes gentle-drift-4 {
    0%,
    100% {
      transform: translate(0, 0) scale(1);
    }
    50% {
      transform: translate(-70px, 80px) scale(1.2);
    }
  }

  /* Ensure main content has proper z-index */
  main {
    position: relative;
    z-index: 10;
  }

  /* Ensure sections are above gradient layer */
  section {
    position: relative;
    z-index: 10;
  }

  /* Responsive adjustments */
  @media (max-width: 768px) {
    .gradient-orb {
      filter: blur(60px);
    }

    .gradient-orb-1 {
      width: 400px;
      height: 400px;
    }

    .gradient-orb-2 {
      width: 350px;
      height: 350px;
    }

    .gradient-orb-3 {
      width: 300px;
      height: 300px;
    }

    .gradient-orb-4 {
      width: 250px;
      height: 250px;
    }
  }

  /* Performance optimization for mobile */
  @media (max-width: 480px) {
    .gradient-orb-3,
    .gradient-orb-4 {
      display: none;
    }
  }

  /* Respect reduced motion preferences */
  @media (prefers-reduced-motion: reduce) {
    .gradient-orb {
      animation: none !important;
    }
  }

  /* High contrast mode - hide decorative gradients */
  @media (prefers-contrast: high) {
    .page-gradient-layer {
      display: none;
    }
  }
}
